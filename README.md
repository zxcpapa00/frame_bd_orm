
<details open>
<summary>Часть 1</summary>
<br>
Написать проект на FastAPI с использованием PostgreSQL в качестве БД. В проекте следует реализовать REST API по работе с меню ресторана, все CRUD операции.

* Зависимости:
  - У меню есть подменю, которые к ней привязаны.
  - У подменю есть блюда.
* Условия:
  + Блюдо не может быть привязано напрямую к меню, минуя подменю.
  + Блюдо не может находиться в 2-х подменю одновременно.
  + Подменю не может находиться в 2-х меню одновременно.
  + Если удалить меню, должны удалиться все подменю и блюда этого меню.
  + Если удалить подменю, должны удалиться все блюда этого подменю.
  + Цены блюд выводить с округлением до 2 знаков после запятой.
  + Во время выдачи списка меню, для каждого меню добавлять кол-во подменю и блюд в этом меню.
  + Во время выдачи списка подменю, для каждого подменю добавлять кол-во блюд в этом подменю.
  + Во время запуска тестового сценария БД должна быть пуста.
</details>

<details open>
<summary>Часть 2</summary>
<br>
Обернуть программные компоненты в контейнеры. Контейнеры должны запускаться по одной команде “docker-compose up -d” или той которая описана вами в readme.md.

* Образы для Docker:
  - (API) python:3.10-slim
  - (DB) postgres:15.1-alpine

1. Написать CRUD тесты для ранее разработанного API с помощью библиотеки pytest
2. Подготовить отдельный контейнер для запуска тестов. Команду для запуска указать в README.md
3. (*)Реализовать вывод количества подменю и блюд для Меню через один (сложный) ORM запрос.
4. (**)Реализовать тестовый сценарий «Проверка кол-ва блюд и подменю в меню» из Postman с помощью pytest
Если FastAPI синхронное - тесты синхронные, Если асинхронное - тесты асинхронные

</details>


<details open>
<summary>Часть 3</summary>
<br>

1. Вынести бизнес логику и запросы в БД в отдельные слои приложения.
2. Добавить кэширование запросов к API с использованием Redis. Не забыть про инвалидацию кэша.
3. Добавить pre-commit хуки в проект. Файл yaml будет прикреплен к ДЗ.
4. Покрыть проект type hints (тайпхинтами)
5. (*)Описать ручки API в соответствий c OpenAPI
6. (**) Реализовать в тестах аналог Django reverse() для FastAPI

* Требования:
  - Код должен проходить все линтеры.
  - Код должен соответствовать принципам SOLID, DRY, KISS.
  - Проект должен запускаться по одной команде (докер).
  - Проект должен проходить все Postman тесты (коллекция с Вебинара №1).
  - Тесты написанные вами после Вебинара №2, должны быть актуальны, запускать и успешно проходить
</details>

<details open>
<summary>Часть 4</summary>
<br>

1. Переписать текущее FastAPI приложение на асинхронное выполнение
2. Добавить в проект фоновую задачу с помощью Celery + RabbitMQ.
3. Добавить эндпоинт (GET) для вывода всех меню со всеми связанными подменю и со всеми связанными блюдами.
4. Реализовать инвалидация кэша в background task (встроено в FastAPI)
5. (*) Обновление меню из google sheets раз в 15 сек.
6. (**) Блюда по акции. Размер скидки (%) указывается в столбце G файла Menu.xlsx

* Фоновая задача: синхронизация Excel документа и БД.
   В проекте создаем папку admin. В эту папку кладем файл Menu.xlsx (будет прикреплен к ДЗ). Не забываем запушить в гит.
   При внесении изменений в файл все изменения должны отображаться в БД. Периодичность обновления 15 сек. Удалять БД при каждом обновлении – нельзя. 


* Требования:
  - Данные меню, подменю, блюд для нового эндпоинта должны доставаться одним ORM-запросом в БД (использовать подзапросы и агрегирующие функций SQL).
  - Проект должен запускаться одной командой
  - Проект должен соответствовать требованиям всех предыдущих вебинаров. (Не забыть добавить тесты для нового API эндпоинта)
</details>
